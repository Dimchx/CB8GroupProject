@model CB8_TeamYBD_GroupProject_MVC.Models.Article

@{
    ViewData["Title"] = "See Article";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://kit.fontawesome.com/e827195700.js"></script>

<div class="card text-white bg-info mb-3" id="card-content">
    <div class="card-header"><h1 style="color:#FFF;">@Model.Title</h1></div>
    <div id="article-content" class="card-body">
        <p class="card-text">@Html.Raw(@Model.Content)</p>
    </div>
    <div>
        <i data-articleId="@Model.Id" class="far fa-smile-wink fa-2x"></i>
        <i class="far fa-share-square fa-2x"></i>
    </div>
</div>
<div class="form-group">
    <div>
        <label for="comment-textarea">Comment</label>
    </div>
    <div>
        <img id="img-comment" src="~/css/no-profile-image.png" alt="img profile" />
        @User.Identity.Name
    </div>
    <div>
        <textarea class="form-control" id="comment-textarea" rows="3" placeholder="write a comment..."></textarea>
    </div>
    <div>
        <button id="submit-comment" type="button" class="btn btn-primary disabled">Submit</button>
    </div>
    
</div>

@section scripts { 
<script>
    $(document).ready(function () {
        $(".fa-smile-wink").on("click", function (e) {
            $.ajax({
                method: 'POST',
                url: '/api/ArticleLikes/',
                contentType: "application/json; charset=utf-8",
                accepts: 'application/json',
                dataType: 'json',
                data: JSON.stringify({
                    articleId: $(e.currentTarget).attr("data-articleId")
                }),
                success: function (response) {
                    console.log("SUCCESS!");
                    console.log(response);
                    if (response.id != 0) {
                        //e.target.classList.remove('fa-smile-wink')
                        e.target.classList.add('liked')
                    }
                    else {
                        e.target.classList.remove('liked')
                        //e.target.classList.add('fa-smile-wink')
                    }
                },
                error: function (response) {
                    console.log("ERROR!!!!!!!!!!");
                    console.log(response);
                }
            });
        });
    });
</script>
}

